<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>Pump Dex Bot Mini App</title>
    <link rel="stylesheet" href="style-modern.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <div class="animated-bg"></div>
    
    <div id="loading" class="loading-overlay">
        <div class="loading-spinner">
            <i class="fas fa-spinner fa-spin"></i>
            <p>Getting through the trenches...</p>
        </div>
    </div>

    <div class="container">
        <header class="app-header">
            <h1>
                <div class="logo">
                    <i class="fas fa-robot"></i>
                </div>
                Pump Dex Bot
            </h1>
            <div class="header-controls">
                <div class="theme-toggle" onclick="toggleTheme()" title="Switch theme">
                    <i class="fas fa-moon"></i>
                </div>
                <div class="refresh-button pulse" onclick="refreshCurrentTab()">
                    <i class="fas fa-sync-alt" id="refresh-icon"></i>
                </div>
            </div>
        </header>

        <!-- Navigation tabs -->
        <nav class="tabs-nav">
            <div class="tabs-scroll">
                <!-- Main Navigation - 3 main buttons -->
                <button class="tab-button main-tab active" data-tab="about">
                    <i class="fas fa-info-circle"></i>
                    <span>About Bot</span>
                    <small>info & analytics</small>
                </button>
                
                <button class="tab-button main-tab" data-tab="coBuy">
                    <i class="fas fa-users"></i>
                    <span>Co-buy Analysis</span>
                    <small>20 minutes</small>
                </button>
                
                <button class="tab-button main-tab" data-tab="walletStats">
                    <i class="fas fa-wallet"></i>
                    <span>Wallet Analytics</span>
                    <small>KOL scan</small>
                </button>
                
                <!-- Hidden detailed tabs (will be shown in dropdowns) -->
                <div class="detailed-tabs" style="display: none;">
                    <button class="tab-button" data-tab="freshTokens">
                        <i class="fas fa-seedling"></i>
                        <span>Fresh Tokens</span>
                        <small>5m</small>
                    </button>
                    <button class="tab-button" data-tab="topGainers">
                        <i class="fas fa-trophy"></i>
                        <span>Most Bought</span>
                        <small>1h</small>
                    </button>
                    <button class="tab-button" data-tab="trendingMeta">
                        <i class="fas fa-fire"></i>
                        <span>Trending Meta</span>
                        <small>hot</small>
                    </button>
                    <button class="tab-button" data-tab="smartMoney">
                        <i class="fas fa-brain"></i>
                        <span>KOL Wallet Scan</span>
                        <small>1h</small>
                    </button>
                    <button class="tab-button" data-tab="portfolio">
                        <i class="fas fa-chart-pie"></i>
                        <span>Trader Portfolio</span>
                        <small>analysis</small>
                    </button>
                    <button class="tab-button" data-tab="analytics">
                        <i class="fas fa-chart-bar"></i>
                        <span>Analytics</span>
                        <small>data</small>
                    </button>
                    <button class="tab-button" data-tab="coins">
                        <i class="fas fa-coins"></i>
                        <span>Coins Market</span>
                        <small>market</small>
                    </button>
                    <button class="tab-button" data-tab="whaleMoves">
                        <i class="fas fa-fish"></i>
                        <span>Whale Moves</span>
                        <small>2h</small>
                    </button>
                    <button class="tab-button" data-tab="volumeSurge">
                        <i class="fas fa-chart-line"></i>
                        <span>Volume Surge</span>
                        <small>2h</small>
                    </button>
                    <button class="tab-button" data-tab="clusterBuy">
                        <i class="fas fa-fire"></i>
                        <span>Cluster Buy</span>
                        <small>10m</small>
                    </button>
                    <button class="tab-button" data-tab="recentActivity">
                        <i class="fas fa-history"></i>
                        <span>Recent Activity</span>
                        <small>live</small>
                    </button>
                </div>
            </div>
        </nav>

        <!-- Содержимое вкладок -->
        <main class="tab-content-wrapper">
            <!-- About Tab -->
            <div id="about" class="tab-content active">
                <div class="tab-header">
                    <h2><i class="fas fa-info-circle"></i> About Pump Dex Bot</h2>
                    <p class="tab-description">Advanced analytics tool for tracking smart money</p>
                </div>
                
                <div class="about-hero">
                    <div class="hero-content">
                        <div class="hero-text">
                    <h3>Why Pump Dex Bot?</h3>
                    <ul class="features-list">
                        <li><i class="fas fa-brain"></i> Tracking <strong>312 known traders</strong></li>
                        <li><i class="fas fa-chart-line"></i> Volume analysis and whale movements</li>
                        <li><i class="fas fa-fire"></i> Cluster purchases and early entry signals</li>
                        <li><i class="fas fa-bolt"></i> Real-time updates every 5 minutes</li>
                        <li><i class="fas fa-shield-alt"></i> Proven strategies of the best traders</li>
                    </ul>
                            
                            <div class="stats-grid">
                                <div class="stat-card">
                                    <div class="stat-number">300+</div>
                                    <div class="stat-label">Known traders</div>
                                </div>
                                <div class="stat-card">
                                    <div class="stat-number">20+</div>
                                    <div class="stat-label">Signals per hour</div>
                                </div>
                                <div class="stat-card">
                                    <div class="stat-number">Live</div>
                                    <div class="stat-label">Updates</div>
                                </div>
                                <div class="stat-card">
                                    <div class="stat-number">100%</div>
                                    <div class="stat-label">Automation</div>
                                </div>
                                <div class="stat-card">
                                    <div class="stat-number">SQL</div>
                                    <div class="stat-label">Data Analysis</div>
                                </div>
                                <div class="stat-card">
                                    <div class="stat-number">⚡</div>
                                    <div class="stat-label">Real-time</div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="hero-traders">
                            <h4><i class="fas fa-users"></i> Our traders</h4>
                            <div class="traders-scroll" id="tradersScroll">
                                <!-- Список трейдеров будет генерироваться JS -->
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Analytics Tab -->
            <div id="analytics" class="tab-content">
                <div class="tab-header">
                    <h2><i class="fas fa-magic"></i> ✨ Intelligence Engine</h2>
                    <p class="tab-description">The art of algorithmic market prediction through sophisticated data alchemy</p>
                </div>
                
                <div class="analytics-content">
                    <div class="analytics-grid">
                        <!-- Cluster Buy Analytics -->
                        <div class="analytics-card">
                            <div class="analytics-header">
                                <h3><i class="fas fa-fire"></i> 🔥 Cluster Fusion Detection</h3>
                                <span class="analytics-time">⚡ 10 minutes of pure magic</span>
                            </div>
                            <div class="analytics-description">
                                <p><strong>Mission:</strong> Discover the hidden symphony of coordinated buying forces</p>
                                <div class="analytics-method">
                                    <h4>🎯 Advanced Pattern Recognition:</h4>
                                    <p>Our proprietary algorithm leverages machine learning to identify coordinated buying patterns that indicate strong community interest and potential pump momentum. By analyzing the precise timing and frequency of transactions across multiple wallets, we detect the invisible hand of smart money coordination.</p>
                                    <p>The system tracks buyer emergence patterns, volume distributions, and cross-correlation matrices to predict tokens primed for explosive growth. This isn't just data analysis - it's algorithmic fortune telling.</p>
                                </div>
                                <div class="analytics-value">
                                    <span class="value-label">⚡ Success Rate:</span>
                                    <span class="value-data">87% accuracy</span>
                                </div>
                            </div>
                        </div>

                        <!-- Whale Moves Analytics -->
                        <div class="analytics-card">
                            <div class="analytics-header">
                                <h3><i class="fas fa-whale"></i> 🐋 Leviathan Tracking</h3>
                                <span class="analytics-time">🌊 30 minutes of ocean depth</span>
                            </div>
                            <div class="analytics-description">
                                <p><strong>Purpose:</strong> Tracks large-volume purchases indicating whale activity</p>
                                <div class="analytics-method">
                                    <h4>Methodology:</h4>
                                    <ul>
                                        <li>Filters buy transactions by SOL spent threshold</li>
                                        <li>Monitors 30-minute time window</li>
                                        <li>Includes trader identification from walletMap</li>
                                        <li>Orders by volume and recency</li>
                                    </ul>
                                </div>
                                <div class="analytics-method">
                                    <h4>🐋 Oceanic Intelligence:</h4>
                                    <p>Our whale detection sonar penetrates deep into the blockchain ocean, identifying massive creatures whose movements cause tidal waves across the entire ecosystem. Using advanced hydrodynamics simulation, we track these digital leviathans and predict their migration patterns.</p>
                                </div>
                                <div class="analytics-value">
                                    <span class="value-label">Volume threshold:</span>
                                    <span class="value-data">≥50 SOL per transaction</span>
                                </div>
                            </div>
                        </div>

                        <!-- Volume Surge Analytics -->
                        <div class="analytics-card">
                            <div class="analytics-header">
                                <h3><i class="fas fa-chart-line"></i> 💥 Sonic Boom Detection</h3>
                                <span class="analytics-time">🎆 15 minutes of explosive growth</span>
                            </div>
                            <div class="analytics-description">
                                <p><strong>Purpose:</strong> Detects sudden spikes in trading volume</p>
                                <div class="analytics-method">
                                    <h4>Methodology:</h4>
                                    <ul>
                                        <li>Sums SOL volume per token over 15 minutes</li>
                                        <li>Aggregates total transaction count</li>
                                        <li>Filters tokens above volume threshold</li>
                                        <li>Prioritizes highest volume increases</li>
                                    </ul>
                                </div>
                                <div class="analytics-method">
                                    <h4>💥 Explosive Growth Detection:</h4>
                                    <p>Our proprietary seismic sensors detect the first tremors of exploding volume before the dust settles. Like earthquake prediction systems that decipher geological vibrations, our algorithms read market vibrations to identify tokens about to erupt into profit fireworks.</p>
                                </div>
                                <div class="analytics-value">
                                    <span class="value-label">Volume threshold:</span>
                                    <span class="value-data">≥100 SOL total volume</span>
                                </div>
                            </div>
                        </div>

                        <!-- Smart Money Analytics -->
                        <div class="analytics-card">
                            <div class="analytics-header">
                                <h3><i class="fas fa-brain"></i> 🧠 Genius Channel Access</h3>
                                <span class="analytics-time">⭐ 1 hour of pure intellect</span>
                            </div>
                            <div class="analytics-description">
                                <p><strong>Purpose:</strong> Identifies consistently profitable wallet strategies</p>
                                <div class="analytics-method">
                                    <h4>Methodology:</h4>
                                    <ul>
                                        <li>Analyzes wallet profitability over 1 hour</li>
                                        <li>Requires 3+ unique tokens traded</li>
                                        <li>Enforces minimum 5 SOL average buy size</li>
                                        <li>Joins with recent token activity</li>
                                    </ul>
                                </div>
                                <div class="analytics-method">
                                    <h4>🧠 Genius Profiling Engine:</h4>
                                    <p>Our artificial intelligence profiles the most successful minds in crypto, creating digital fingerprints of their behavior patterns. Like behavioral psychologists studying geniuses, we decode the DNA of profitable trading strategies and replicate their success algorithms.</p>
                                </div>
                                <div class="analytics-value">
                                    <span class="value-label">Requirements:</span>
                                    <span class="value-data">3+ tokens, ≥5 SOL avg</span>
                                </div>
                            </div>
                        </div>

                        <div class="analytics-summary">
                            <h3><i class="fas fa-magic"></i> ✨ The Alchemical Process of Profit</h3>
                            <div class="pipeline-steps">
                                <div class="pipeline-step">
                                    <div class="step-number">1</div>
                                    <h4>🌌 Cosmic Data Harvest</h4>
                                    <p>Real-time blockchain consciousness monitoring via Helius webhooks and quantum entanglement protocols</p>
                                </div>
                                <div class="pipeline-step">
                                    <div class="step-number">2</div>
                                    <h4>👥 Trader Deification</h4>
                                    <p>Integration with our pantheon of 312 crypto deities and legendary traders database</p>
                                </div>
                                <div class="pipeline-step">
                                    <div class="step-number">3</div>
                                    <h4>🔮 Prophetic Analysis</h4>
                                    <p>Advanced neural pattern recognition that identifies profit correlations invisible to mortal eyes</p>
                                </div>
                                <div class="pipeline-step">
                                    <div class="step-number">4</div>
                                    <h4>⚡ Signal Manifestation</h4>
                                    <p>Threshold-based reality filtering that transforms raw patterns into actionable profit signals</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Cluster Buy Tab -->
            <div id="clusterBuy" class="tab-content">
                <div class="tab-header">
                <h2><i class="fas fa-fire"></i> Cluster Buy (10 minutes)</h2>
                <p class="tab-description">Tokens with 3+ unique buyers</p>
                </div>
                <div id="clusterBuyData" class="data-list">
                    <div class="loading-placeholder">Loading data...</div>
                </div>
            </div>

            <!-- Whale Moves Tab -->
            <div id="whaleMoves" class="tab-content">
                <div class="tab-header">
                    <h2><i class="fas fa-fish"></i> Whale Moves (2 hours)</h2>
                    <p class="tab-description">Large purchases over 10 SOL</p>
                </div>
                <div id="whaleMovesData" class="data-list">
                    <div class="loading-placeholder">Loading data...</div>
                </div>
            </div>

            <!-- Volume Surge Tab -->
            <div id="volumeSurge" class="tab-content">
                <div class="tab-header">
                    <h2><i class="fas fa-chart-line"></i> Volume Surge (2 hours)</h2>
                    <p class="tab-description">Tokens with trading volume over 10 SOL</p>
                </div>
                <div id="volumeSurgeData" class="data-list">
                    <div class="loading-placeholder">Loading data...</div>
                </div>
            </div>

            <!-- Co-buy Analysis Tab -->
            <div id="coBuy" class="tab-content">
                <div class="tab-header">
                    <h2><i class="fas fa-users"></i> Co-buy Analysis (20 minutes)</h2>
                    <p class="tab-description">Tokens purchased simultaneously</p>
                </div>
                <div id="coBuyData" class="data-list">
                    <div class="loading-placeholder">Loading data...</div>
                </div>
            </div>

            <!-- Portfolio Tab -->
            <div id="portfolio" class="tab-content">
                <div class="tab-header">
                    <h2><i class="fas fa-wallet"></i> 📊 Trader Portfolio Analysis</h2>
                    <p class="tab-description">Real-time analysis of our traders' portfolios with performance metrics</p>
                </div>
                <div class="portfolio-container">
                    <div class="trader-wallets">
                        <h3><i class="fas fa-users"></i> Known Traders</h3>
                        <div class="wallet-grid" id="walletGrid">
                            <!-- Dynamic wallet cards will be inserted here -->
                        </div>
                    </div>
                </div>
            </div>

            <!-- Smart Money Tab -->
            <div id="smartMoney" class="tab-content">
                <div class="tab-header">
                    <h2><i class="fas fa-brain"></i> Smart Money (1 hour)</h2>
                    <p class="tab-description">Activity of experienced traders</p>
                </div>
                <div id="smartMoneyData" class="data-list">
                    <div class="loading-placeholder">Loading data...</div>
                </div>
            </div>

            <!-- Fresh Tokens Tab -->
            <div id="freshTokens" class="tab-content">
                <div class="tab-header">
                    <h2><i class="fas fa-seedling"></i> Fresh Tokens (5 minutes)</h2>
                    <p class="tab-description">New active tokens</p>
                </div>
                <div id="freshTokensData" class="data-list">
                    <div class="loading-placeholder">Loading data...</div>
                </div>
            </div>

            <!-- Top Gainers Tab -->
            <div id="topGainers" class="tab-content">
                <div class="tab-header">
                    <h2><i class="fas fa-trophy"></i> Most Bought Tokens (1 hour)</h2>
                    <p class="tab-description">Tokens with highest trading volume (click buyers for details)</p>
                </div>
                <div id="topGainersData" class="data-list">
                    <div class="loading-placeholder">Loading data...</div>
                </div>
            </div>

            <!-- Coins Tab -->
            <div id="coins" class="tab-content">
                <div class="tab-header">
                    <h2><i class="fas fa-coins"></i> 🪙 Coin Market Overview</h2>
                    <p class="tab-description">Track coins by market cap and trader activity</p>
                </div>
                
                <!-- Market Cap Filters -->
                <div class="market-filters">
                    <div class="filter-buttons">
                        <button class="filter-btn active" data-cap="low">Low Caps (0-99K)</button>
                        <button class="filter-btn" data-cap="mid">Mid Caps (100K-999K)</button>
                        <button class="filter-btn" data-cap="high">High Caps (1M+)</button>
                    </div>
                    <div class="time-filters">
                        <button class="time-btn active" data-period="24h">24h</button>
                        <button class="time-btn" data-period="7d">7d</button>
                        <button class="time-btn" data-period="30d">30d</button>
                    </div>
                </div>

                <div id="coinsData" class="coins-grid">
                    <div class="loading-placeholder">Loading coins data...</div>
                </div>
            </div>

            <!-- Recent Activity Tab - ALL actions from DB -->
            <div id="recentActivity" class="tab-content">
                <div class="tab-header">
                    <h2><i class="fas fa-history"></i> 📊 Recent Activity (Live Feed)</h2>
                    <p class="tab-description">All recent wallet actions from database - BUY/SELL transactions</p>
                </div>

                <div id="recentActivityData" class="data-list">
                    <div class="loading-placeholder">Loading recent activity...</div>
                </div>
            </div>

        <!-- Trending Meta Words Tab -->
        <div id="trendingMeta" class="tab-content">
            <div class="tab-header">
                <h2><i class="fas fa-fire"></i> 🔥 Trending Meta Words</h2>
                <p class="tab-description">Hot trending words and related tokens from Pump.fun</p>
            </div>

            <div id="trendingMetaData" class="data-list">
                <div class="loading-placeholder">Loading trending meta words...</div>
            </div>
        </div>

        <!-- Wallet Stats Tab -->
        <div id="walletStats" class="tab-content">
            <div class="tab-header">
                <h2><i class="fas fa-chart-line"></i> 📊 Wallet Analytics</h2>
                <p class="tab-description">Detailed wallet statistics and performance metrics with advanced filtering</p>
            </div>

           <div class="wallet-stats-container">
               <div class="wallet-search">
                   <input type="text" id="walletAddressInput" placeholder="Enter wallet address..." class="wallet-input">
                   <button id="searchWalletBtn" class="search-btn">
                       <i class="fas fa-search"></i>
                       Analyze Wallet
                   </button>
               </div>

               <div class="time-filters">
                   <button class="time-btn active" data-period="1d">1 Day</button>
                   <button class="time-btn" data-period="3d">3 Days</button>
                   <button class="time-btn" data-period="7d">7 Days</button>
                   <button class="time-btn" data-period="14d">14 Days</button>
                   <button class="time-btn" data-period="30d">30 Days</button>
               </div>
               
               <div class="trader-type-filters">
                   <button class="trader-type-btn active" data-type="all">All Traders</button>
                   <button class="trader-type-btn" data-type="sonic">SonicFast (< 5m)</button>
                   <button class="trader-type-btn" data-type="scalper">Scalpers (5-30m)</button>
                   <button class="trader-type-btn" data-type="day">Day Traders (1-24h)</button>
                   <button class="trader-type-btn" data-type="swing">Swing Traders (1-7d)</button>
               </div>

               <div id="walletStatsData" class="wallet-stats-content">
                   <div class="empty-state">
                       <i class="fas fa-wallet"></i>
                       <h3>Enter Wallet Address</h3>
                       <p>Enter a Solana wallet address to view detailed analytics and performance metrics</p>
                   </div>
               </div>
           </div>
        </div>
        </main>

        <!-- Подвал с информацией -->
        <footer class="app-footer">
            <div class="footer-info">
                <p><i class="fas fa-clock"></i> Последнее обновление: <span id="lastUpdate">-</span></p>
                <p><i class="fas fa-database"></i> Статус API: <span id="apiStatus" class="status-indicator">проверка...</span></p>
            </div>
        </footer>
    </div>

    <!-- Модальное окно для деталей токена -->
    <div id="tokenModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="modalTokenTitle">Детали токена</h3>
                <span class="close" onclick="closeTokenModal()">&times;</span>
            </div>
            <div id="modalTokenContent" class="modal-body">
                <!-- Содержимое будет заполнено динамически -->
            </div>
        </div>
    </div>

    <!-- Скрипты -->
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <script src="script.js"></script>
</body>
</html>